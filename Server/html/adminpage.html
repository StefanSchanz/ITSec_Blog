<!DOCTYPE html>
<html lang="en" class="h-100" ng-app="DataManagerApp">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.7.9/angular.min.js"></script>
  <ng-include src="'/html/header.html'"></ng-include>
  <script src="/js/data.js"></script>
    <main role="main" class="flex-shrink-0">  
        <div class="container" style="margin-top: 60px;">
            <div class="text-center">
                <h1>Welcome to the Admin Site!</h1>
                <p>This Blog Site is developed in the purpose to check IT-Security on Web-Applications.</p>
                <p>Here you can see a list of all current users!</p>
                <p>You may edit or delete them, or set them as a admin!</p>
                <p>Have fun!</h3>
            </div>
            <div class="text-center">

                <div ng-controller="AdminController">
                    <div ng-if="data.length<1">
                        <div class="text-center">
                            <h1 style="margin-top: 40px;">Ough you found a site that's only possible to use by Admins!</h1>
                            <br>
                        </div>
                    </div>
                    <div ng-if="data.length>=1">
            <div ng-controller="UserDataController" style="margin-top: 40px;">
                <div ng-repeat="user in data">
                    <p>Id User: {{user.idbloguser}}</p>
                    <p>Username: {{user.username}}</p>
                    <p>Password: {{user.password}}</p>
                    <p>isAdmin: {{user.isAdmin}}</p>
                    <p>
                        <span>                                        
                            <form method="POST" action="/api/editUser">
                                <div class="form-group">
                                <label for="exampleFormControlInput1">Edit User {{user.username}}</label>
                                <input
                                    type="text"
                                    class="form-control"
                                    id="exampleFormControlInput1"
                                    value="{{user.username}}"
                                    name="newusername"
                                />
                                <input
                                    type="text"
                                    class="form-control"
                                    id="exampleFormControlInput2"
                                    value="{{user.password}}"
                                    name="newpassword"
                                />
                                <input
                                    type="text"
                                    class="form-control"
                                    id="exampleFormControlInput3"
                                    value="{{user.isAdmin}}"
                                    name="newisAdmin"
                                />
                                <input
                                    type="hidden"
                                    id="custId"
                                    name="user_id"
                                    value={{user.idbloguser}}
                                />
                                </div>
                                <input class="btn btn-secondary my-2 my-sm-0" type="submit" value="Submit Edit"/>
                            </form>
                            <button
                            class="btn btn-secondary my-2 my-sm-0"
                            style="margin-top: 40px;"
                            type="submit"
                            title="Delete Entry"
                            ng-click="delete(user.idbloguser)">
                            Delete User
                            </button>
                        </span>
                    </p>
                    <hr/>
                </div>
            </div>
            </div>
        </div>
        </div>
    </main>